import matplotlib.pyplot as plt
import pandas as pd

data = {
    'moderator': [126, 181, 180, 112, 187, 188, 170, 123, 102, 125, 149, 122, 146, 153, 103, 175, 156, 185, 109, 164, 116, 121, 141, 148, 136, 176, 186, 173, 172, 152, 111, 143, 165, 163, 117, 135, 133, 128, 144, 178, 161, 167, 150, 114],
    'avg_tfr': [5996, 4691.67, 4579.1, 4381.9, 4371.7, 4058.5, 3883.1, 3762.4, 3714.2, 3620, 3486.5, 3316.3, 3224.5, 3169.2, 2999.7, 2721.8, 1263.2, 1205.4, 745, 727.5, 706, 690, 649, 647.1, 630.5, 611.3, 606, 591.1, 590.6, 585.7, 542.3, 535.1, 534.4, 473.1, 454.3, 440.3, 438.5, 394.85, 391, 386.7, 270.35, 268.3, 116, 72.65],
    'pct_tfr_gt_45': [100, 96.25, 98.3, 97.38, 93.8, 99.07, 96.2, 95.45, 99.24, 96.25, 97.2, 96.48, 90.87, 95.35, 87.97, 86.67, 52.27, 100, 48.37, 55.78, 77.76, 56.82, 64.52, 45.48, 58.1, 51.68, 52.24, 71.13, 45.88, 51.15, 48.85, 83.69, 59.03, 83.85, 32.61, 51.46, 100, 65.4, 80.33, 49.37, 70.17, 64.18, 87.5, 0]
}

df = pd.DataFrame(data)

fig, ax = plt.subplots(figsize=(12, 8))
bars = ax.barh(df['moderator'].astype(str), df['avg_tfr'], color='skyblue')

for i, pct in enumerate(df['pct_tfr_gt_45']):
    if pct > 10:
        bars[i].set_color('red')

ax.set_xlabel('Avg TFR (minutes)')
ax.set_title('Проблемні агенти служби підтримки')
plt.gca().invert_yaxis()
plt.show()
